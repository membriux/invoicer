extends layout

block content
  .container
    .row
      h1= title
      
      form.row.g-3(action='/generate', method='post')
        .col-12
          //- p#initialDate(style="display:none;")= initialDate
          //- p#interval(style="display:none;")= interval
          p#company(style="display:none;")= company
          p#initDate(style="display:none;")= initDate
          p#companyData(style="display:none;")= JSON.stringify(companies)
          p Current Bi-Weekly Cycle: 
            b#currentCycleText
          p Cycle Dates (14 days): 
            b.cycleInit
            b  â†’  
            b.cycleEnd(name='cycleEnd')

            input.cycleEnd.form-control(name='cycleEnd' type='hidden')
            input.cycleInit.form-control(name='cycleInit' type='hidden')
        .col-12
          label.form-label Company
          select#companySelect.form-select(name='company')
            - for (var companyKey in companies)
              option(value=companyKey selected=companyKey === company)= companies[companyKey].header
          small.form-text.text-muted#companyInfo
        .col-6
          label.form-label Hours
          input.form-control(name='hours'  type='number')
        .col-6  
          label.form-label Bi-Weekly Cycle #
          input#cycle.form-control(name='cycle' type='number' min='1')
          small.form-text.text-muted Each cycle = 14 days
        .col-12
          button#submit.btn.btn-primary(type='submit' formmethod='post') Generate Invoice

  .container  
    .row
      .col
        br  
        h3 Preview
        iframe#pdfPreview(src='invoice.pdf' width='500' height='678')

  
  script(src=`js/${type}.js`)
  script(src='js/dynamic.js')
  script.
    document.getElementById('cycle').addEventListener('change', function() {
      onCycleChange();
    });
    
    document.getElementById('submit').addEventListener('click', function() {
      refresh();
    });

          

